extends ../authed_layout

mixin phases(phase)
    li.phase(id = "#{phase.id}") Phase: #{phase.name}
        div.row-fluid.droppable
            div.name.span12(data-phase-id = "#{phase.id}") drag here [   ]

        - if (phase.children != undefined){
            ul
                - each child in phase.children
                    mixin phases(child)
        - }
        - if (phase.tasks != undefined){
            - each task in phase.tasks
                div.row-fluid.task(id ="#{task.id}", data-taskid="#{task.id}", data-taskname = "#{task.name}")
                    div.name.span1
                        i.icon-tasks.pull-right
                    div.name.span5 Task: #{task.name}
                    div.span6
                        p [estimated: #{task.estimate}, posted: #{task.posted}]
        - }

block au_content
    div.row-fluid
        div.span6
            h4 Project: #{project.name}
        div.span6
            ul.nav.nav-pills
                li
                    a(href="#edit", alt="edit") Edit settings
                li
                    a(href="#invoicing", alt="invoicing") Invoicing
    div.row-fluid
        div.span12
            ul
                - each phase in phases
                    mixin phases(phase)

    script(type='text/javascript', src='/javascripts/client/12_project_details.js')
